# 🔍 Port Scanning with Metasploit

Metasploit provides various modules to perform port and service discovery on target systems.

## 🔎 Finding Port Scanning Modules

Use the `search portscan` command to list relevant modules:
- `portscan/tcp`
- `portscan/syn`
- `portscan/xmas`
- `portscan/ack`
- `portscan/ftpbounce`
- `portscan/natpmp`
- `sap_router_portscanner`

Use modules by index or full path, e.g.:
```bash
use 5
# or
use auxiliary/scanner/portscan/tcp
```

## ⚙️ Common Options for Port Scan Modules

| Option       | Description                                                                 |
|--------------|-----------------------------------------------------------------------------|
| `RHOSTS`     | Target hosts or range                                                       |
| `PORTS`      | Ports to scan (e.g., 1–10000). Note: Not the same as Nmap’s default top 1000 |
| `THREADS`    | Number of concurrent hosts to scan                                          |
| `CONCURRENCY`| Number of ports per host to scan in parallel                                |
| `TIMEOUT`    | Timeout in milliseconds per connection                                      |
| `DELAY`      | Delay between connections                                                   |
| `JITTER`     | Random variation added to delay                                             |

## 🛰️ Using Nmap from Metasploit

Metasploit allows executing Nmap directly from `msfconsole`:

```bash
msf6 > nmap -sS 10.10.12.229
```

## 📡 UDP Scanning

Use `scanner/discovery/udp_sweep` for quick detection of common UDP services (e.g., DNS, NetBIOS).

## 📁 SMB Scanning

Modules like `smb_version` and `smb_enumshares` help detect OS version, share details, and configurations:

```bash
use auxiliary/scanner/smb/smb_version
run
```

## 🧠 Pro Tip

Don’t ignore “exotic” services like NetBIOS. Look for shared files and indicative system names (e.g., CORP-DC, SALES). Always explore available modules relevant to your target.

---

## 🔬 Practical Exercise:
- How many ports are open on the target system?
  - Method 1: Use Nmap <IP Address> </br>
  ![image](https://github.com/user-attachments/assets/340633d5-dabd-45d7-b3fe-02d98146bbb7)

  - Method 2: Use Metasploit (Follow the steps)
    ```bash
    msfconsole
    search portscan
    use 5
    show options
    set RHOST <machine_ip>
    run
    ```
    ![image](https://github.com/user-attachments/assets/3f10a699-fc19-4711-a7dd-784721c8d55f)
    ![image](https://github.com/user-attachments/assets/1ba9fe42-96f6-4617-84f2-6df6912fb293)


